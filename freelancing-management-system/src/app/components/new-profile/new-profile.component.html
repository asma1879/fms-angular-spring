<div class="card shadow-sm profile-card p-4 border-0 rounded-4">
  <!-- Avatar + Header -->
  <div class="text-center mb-4">
    <img 
      [src]="getAvatarUrl()" 
      class="profile-avatar mb-3"
      alt="User" 
    />
    <h4 class="fw-semibold mb-0">{{ user?.userName || 'User' }}</h4>
    <p class="text-muted small">{{ user?.email }}</p>
    <span class="badge rounded-pill bg-success text-white px-3 py-1 text-capitalize">
      {{ user?.role || 'freelancer' }}
    </span>
  </div>

  <!-- Profile Completion Progress -->
  <div class="mb-4">
    <label class="form-label fw-bold">Profile Completion</label>
    <div class="progress" style="height: 10px;">
      <div
        class="progress-bar bg-success"
        role="progressbar"
        [style.width.%]="profileCompletion"
        [attr.aria-valuenow]="profileCompletion"
        aria-valuemin="0"
        aria-valuemax="100">
      </div>
    </div>
    <small class="text-muted">{{ profileCompletion }}% completed</small>
  </div>

  <!-- Display Mode -->
  <div *ngIf="!editing" class="text-start">
    <div class="mb-2"><strong>Title:</strong> {{ user?.title || 'Not provided' }}</div>
    <div class="mb-2"><strong>Country:</strong> {{ user?.country || '-' }}</div>
    <div class="mb-2"><strong>Hourly Rate:</strong> <span class="text-success">${{ user?.hourlyRate }}/hr</span></div>

    <!-- Skill Tags -->
    <div class="mb-2">
      <strong>Skills:</strong>
      <ng-container *ngIf="user?.skills">
        <span 
          *ngFor="let skill of user.skills.split(',')" 
          class="badge bg-secondary me-1 mb-1 text-capitalize">
          {{ skill.trim() }}
        </span>
      </ng-container>
    </div>

    <div class="mb-2"><strong>Languages:</strong> {{ user?.languages }}</div>
    <div class="mb-2"><strong>Education:</strong> {{ user?.education }}</div>
    <div class="mb-2"><strong>Certifications:</strong> {{ user?.certifications }}</div>
    <div class="mb-2"><strong>Experience:</strong> {{ user?.experience }}</div>
    <div class="mb-3"><strong>About Me:</strong> <br />{{ user?.bio }}</div>

    <!-- Wallet -->
    <p *ngIf="walletBalance !== null" class="text-success fw-bold">
      üí∞ Wallet Balance: ${{ walletBalance | number:'1.2-2' }}
    </p>

    <!-- Buttons -->
    <div class="d-flex justify-content-end gap-2 mt-4">
      <button class="btn btn-outline-primary btn-sm" (click)="toggleEdit()">
        <i class="bi bi-pencil-square me-1"></i>Edit
      </button>
      <button class="btn btn-outline-danger btn-sm" (click)="logout()">
        <i class="bi bi-box-arrow-right me-1"></i>Logout
      </button>
    </div>
  </div>

  <!-- Edit Form (unchanged) -->
 <!-- Edit Form (shown only if editing is true) -->
<form *ngIf="editing" (ngSubmit)="updateProfile()" class="text-start">
  <div class="row g-4">
    <div class="col-md-6">
      <label class="form-label fw-bold">Name</label>
      <input type="text" class="form-control" [(ngModel)]="user.name" name="name" required />
    </div>

    <div class="col-md-6">
      <label class="form-label fw-bold">Title</label>
      <input type="text" class="form-control" [(ngModel)]="user.title" name="title" />
    </div>

    <div class="col-md-6">
      <label class="form-label fw-bold">Country</label>
      <input type="text" class="form-control" [(ngModel)]="user.country" name="country" />
    </div>

    <div class="col-md-6">
      <label class="form-label fw-bold">Hourly Rate ($)</label>
      <input type="number" class="form-control" [(ngModel)]="user.hourlyRate" name="hourlyRate" />
    </div>

    <div class="col-12">
      <label class="form-label fw-bold">Skills (comma separated)</label>
      <input type="text" class="form-control" [(ngModel)]="user.skills" name="skills" />
    </div>

    <div class="col-md-6">
      <label class="form-label fw-bold">Languages</label>
      <input type="text" class="form-control" [(ngModel)]="user.languages" name="languages" />
    </div>

    <div class="col-md-6">
      <label class="form-label fw-bold">Education</label>
      <input type="text" class="form-control" [(ngModel)]="user.education" name="education" />
    </div>

    <div class="col-md-6">
      <label class="form-label fw-bold">Certifications</label>
      <input type="text" class="form-control" [(ngModel)]="user.certifications" name="certifications" />
    </div>

    <div class="col-md-6">
      <label class="form-label fw-bold">Experience (years)</label>
      <input type="number" class="form-control" [(ngModel)]="user.experience" name="experience" />
    </div>

    <div class="col-12">
      <label class="form-label fw-bold">About Me</label>
      <textarea class="form-control" rows="3" [(ngModel)]="user.bio" name="bio"></textarea>
    </div>

    <div class="col-12 text-end">
      <button type="submit" class="btn btn-outline-success px-4">
        <i class="bi bi-check-circle-fill me-1"></i>Update Profile
      </button>
      <button type="button" class="btn btn-outline-secondary ms-2" (click)="editing = false">
  <i class="bi bi-x-circle me-1"></i>Cancel
</button>

    </div>
  </div>
</form>


  <!-- Review Section -->
  <div class="border-top pt-4 mt-4"  *ngIf="role === 'freelancer'" >
    <h5><i class="bi bi-star-fill text-warning me-2"></i>Reviews</h5>
    <div class="mb-3">
      <div class="d-flex justify-content-between">
        <strong>Client: John Doe</strong>
        <span class="text-warning">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
      </div>
      <p class="mb-1 text-muted">‚ÄúExcellent work, delivered on time and great communication.‚Äù</p>
      <small class="text-muted">Posted on July 2025</small>
    </div>
    <!-- Repeat similar blocks for more reviews -->
  </div>
</div>
